{"remainingRequest":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js!/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/andrei/dev/vue/crmav100/src/widgets/inputs/FlyEditor/FlyEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/andrei/dev/vue/crmav100/src/widgets/inputs/FlyEditor/FlyEditor.vue","mtime":1554294831699},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport buttons from './buttons';\nexport default {\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    rows: {\n      type: Number,\n      default: ''\n    },\n    toolbar: {\n      type: Array,\n      default: function _default() {\n        return [['formats', 'bold', 'italic', 'underline', 'subscript', 'superscript', 'strikeThrough', 'backColor', 'foreColor', 'fontSize', 'fontName'], ['left', 'right', 'center', 'indent', 'outdent'], ['insertImage', 'createlink', 'unlink'], ['insertOrderedList', 'insertUnorderedList', 'insertHorizontalRule'], //    ['undo', 'redo'],\n        ['cut', 'copy'], ['selectAll', 'removeFormat'], ['code', 'fullscr']];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      id: null,\n      content: null,\n      fullscr: false,\n      viewcode: false,\n      buttons: buttons\n    };\n  },\n  watch: {\n    value: function value(newVal, oldVal) {\n      if (oldVal == '') {\n        document.getElementById(this.id).innerHTML = newVal;\n      }\n    }\n  },\n  methods: {\n    emitChange: function emitChange(ev) {\n      if (this.viewcode) {\n        var val = ev.target.innerText;\n      } else {\n        var val = ev.target.innerHTML;\n      }\n\n      this.$emit('change-model', val);\n      this.$emit('input', val);\n    },\n    genAction: function genAction(btn) {\n      switch (btn.command) {\n        case 'fullscr':\n          if (this.fullscr) {\n            this.fullscr = false;\n          } else {\n            this.fullscr = true;\n          }\n\n          break;\n\n        case 'code':\n          if (this.viewcode) {\n            this.viewcode = false;\n            document.getElementById(this.id).innerHTML = this.value;\n          } else {\n            this.viewcode = true;\n            document.getElementById(this.id).innerText = this.value;\n          }\n\n          break;\n\n        default:\n          if (!this.viewcode) {\n            if (btn.command == 'createlink' || btn.command == 'insertImage') {\n              btn.value = prompt('Enter the link here: ', '');\n            }\n\n            document.getElementById(this.id).focus();\n            document.execCommand(btn.command, false, btn.value);\n            this.$emit('change-model', document.getElementById(this.id).innerHTML);\n            this.$emit('input', document.getElementById(this.id).innerHTML);\n          }\n\n      }\n    }\n  },\n  components: {},\n  mounted: function mounted() {\n    this.id = this._uid;\n  },\n  created: function created() {},\n  destroyed: function destroyed() {}\n};",{"version":3,"sources":["FlyEditor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <textarea :value=\"value\" style=\"display:none;\"></textarea>\n    <div  class=\"v-text-editor\" :class=\"{'v-text-editor-full': fullscr}\">\n      <div class=\"v-text-editor-toolbar\">\n        <div class=\"v-text-editor-toolbar-group\" v-for=\"gr in toolbar\">\n          <div class=\"v-text-btn-wrapper\" v-for=\"el in gr\">\n            <template v-if=\"buttons[el].command=='submenu'\">\n              <button class=\"v-text-btn\" v-on:click=\"buttons[el].show ? buttons[el].show = false : buttons[el].show = true\" :title=\"buttons[el].title\" v-html=\"buttons[el].text\"></button>\n              <div v-if=\"buttons[el].show\" class=\"v-text-editor-toolbar-submenu\" :class=\"buttons[el].type\">\n                <div v-for=\"sub in buttons[el].value\">\n                  <button class=\"v-text-btn\" v-on:click=\"buttons[el].show = false;genAction(sub)\" :title=\"sub.title\" v-html=\"sub.text\" :style=\"{background: sub.value }\"></button>\n                </div>\n              </div>\n            </template>\n            <template v-else>\n              <button class=\"v-text-btn\" v-on:click=\"genAction(buttons[el])\" :title=\"buttons[el].title\" v-html=\"buttons[el].text\"></button>\n            </template>\n          </div>\n        </div>\n      </div>\n      <div :id=\"id\" class=\"v-text-editor-content\" contenteditable v-on:blur=\"emitChange\" v-on:keyup=\"emitChange\" :style=\"rows && !fullscr? 'height: '+rows*20+'px' : ''\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport buttons from './buttons'\n\nexport default {\n  props: {\n    value: {\n      type: String,\n      default : ''\n    },\n    rows: {\n      type: Number,\n      default : ''\n    },\n    toolbar: {\n      type: Array,\n      default: () => [\n        ['formats', 'bold' ,'italic', 'underline', 'subscript', 'superscript', 'strikeThrough', 'backColor', 'foreColor', 'fontSize', 'fontName'],\n        ['left', 'right', 'center', 'indent', 'outdent'],\n        ['insertImage', 'createlink', 'unlink'],\n        ['insertOrderedList', 'insertUnorderedList', 'insertHorizontalRule'],\n    //    ['undo', 'redo'],\n        ['cut', 'copy'],\n        ['selectAll', 'removeFormat'],\n        ['code', 'fullscr']\n      ]\n    },\n  },\n  data: function() {\n    return {\n      id: null,\n      content: null,\n      fullscr: false,\n      viewcode: false,\n      buttons: buttons\n    }\n  },\n  watch: {\n    value: function(newVal, oldVal) {\n      if (oldVal == '') {\n        document.getElementById(this.id).innerHTML = newVal\n      }\n    }\n  },\n  methods: {\n    emitChange (ev) {\n      if (this.viewcode) {\n        var val = ev.target.innerText\n      } else {\n        var val = ev.target.innerHTML\n      }\n      this.$emit('change-model', val)\n      this.$emit('input', val)\n    },\n    genAction (btn) {\n      switch (btn.command) {\n        case 'fullscr':\n        if (this.fullscr) {\n          this.fullscr = false\n        } else {\n          this.fullscr = true\n        }\n        break;\n        case 'code':\n        if (this.viewcode) {\n          this.viewcode = false\n          document.getElementById(this.id).innerHTML = this.value\n        } else {\n          this.viewcode = true\n          document.getElementById(this.id).innerText = this.value\n        }\n        break;\n        default:\n        if (!this.viewcode) {\n          if (btn.command == 'createlink' || btn.command == 'insertImage') {\n              btn.value = prompt('Enter the link here: ', '');\n            }\n          document.getElementById(this.id).focus()\n          document.execCommand(btn.command, false, btn.value)\n          this.$emit('change-model', document.getElementById(this.id).innerHTML)\n          this.$emit('input', document.getElementById(this.id).innerHTML)\n        }\n      }\n\n    }\n  },\n  components: {\n  },\n  mounted () {\n    this.id = this._uid\n  },\n  created () {\n\n  },\n  destroyed () {\n\n  }\n}\n</script>\n\n<style lang=\"less\">\n.v-text-editor {\n  background: #fff;\n  width: 100%;\n  border: 1px solid #ccc;\n  border-radius: 3px;\n  .v-text-editor-content {\n    resize: vertical;\n    outline: none;\n    min-height: 150px;\n    overflow: auto;\n    padding: 1em;\n    height: calc(100% - 45px);\n  }\n  .v-text-editor-toolbar {\n    border-bottom: 1px solid #eee;\n    white-space: nowrap;\n    overflow-x: auto;\n    height: 45px;\n    .v-text-editor-toolbar-group {\n      display: inline-block;\n      border-right: 1px solid #aaa;\n    }\n    .v-text-btn {\n      outline: none;\n      background: none;\n      color: #999;\n      padding: 10px;\n      width: 36px;\n      text-align: center;\n      font-size: 16px;\n      border: none;\n      cursor: pointer;\n      border-right: 1px solid #efefef;\n      &:hover {\n        background: #eee;\n        color: #555;\n      }\n    }\n  }\n}\n.v-text-btn-wrapper {\n  display: inline-block;\n  position: relative;\n  .v-text-editor-toolbar-submenu {\n    position: absolute;\n    background: #fff;\n    z-index: 20;\n    &.color {\n      width: 300px;\n      div {\n        display: inline-block;\n      }\n    }\n    &.fontname {\n      button {\n        width: auto;\n        text-align: left;\n      }\n    }\n  }\n}\n.v-text-editor-full {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 20000;\n}\n</style>\n"],"sourceRoot":"src/widgets/inputs/FlyEditor"}]}