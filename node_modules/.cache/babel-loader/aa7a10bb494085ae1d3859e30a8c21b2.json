{"remainingRequest":"/home/andrei/dev/vue/crmav100/node_modules/thread-loader/dist/cjs.js!/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js!/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/andrei/dev/vue/crmav100/src/widgets/phone/caller.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/andrei/dev/vue/crmav100/src/widgets/phone/caller.vue","mtime":1555427314253},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: {\n    server: String,\n    password: String,\n    user: String,\n    ws: String\n  },\n  data: function data() {\n    return {\n      status: '',\n      muted: false,\n      ua: null,\n      uri: null,\n      canCall: true,\n      canRing: true,\n      session: null,\n      sipCallTimer: null,\n      sipRingTone: null,\n      options: null\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.$root.$on('global-call', function () {\n      _this.startCall();\n    });\n    this.sipRingTone = document.getElementById('sip-ringtone');\n    this.uri = 'sip:' + this.user + '@' + this.server;\n    var self = this;\n    var socket = new JsSIP.WebSocketInterface(this.ws);\n    socket.via_transport = \"wss\";\n    var configuration = {\n      session_timers: false,\n      use_preloaded_route: false,\n      sockets: [socket],\n      uri: this.uri,\n      password: this.password,\n      realm: this.server\n    };\n    var eventHandlers = {\n      progress: function progress(e) {\n        _this.status = \"Соединяем\";\n      },\n      failed: function failed(e) {\n        _this.endCall();\n      },\n      ended: function ended(e) {\n        _this.endCall();\n      },\n      confirmed: function confirmed(e) {\n        _this.startTimer();\n      },\n      muted: function muted(e) {\n        _this.muted = true;\n      },\n      unmuted: function unmuted(e) {\n        _this.muted = false;\n      }\n    };\n    var pcConfig = {\n      rtcpMuxPolicy: 'negotiate',\n      iceServers: [{\n        urls: ['stun:stun.l.google.com:19302', 'stun:stun1.l.google.com:19302', 'stun:stun2.l.google.com:19302', 'stun:stun3.l.google.com:19302', 'stun:stun4.l.google.com:19302']\n      }]\n    };\n    this.options = {\n      eventHandlers: eventHandlers,\n      pcConfig: pcConfig,\n      mediaConstraints: {\n        audio: true,\n        video: false\n      },\n      rtcOfferConstraints: {\n        offerToReceiveAudio: 1\n      }\n    };\n    this.ua = new JsSIP.UA(configuration);\n    this.ua.on('connected', function (e) {\n      _this.status = \"Готов\";\n    });\n    this.ua.on('disconnected', function (e) {\n      _this.status = \"Нет соединения\";\n    });\n    this.ua.on('registered', function (e) {});\n    this.ua.on('unregistered', function (e) {\n      _this.status = \"Не зарегистрирован\";\n    });\n    this.ua.on('registrationFailed', function (e) {\n      _this.status = \"Ошибка регистрации\";\n    });\n    this.ua.on('newRTCSession', function (ev) {\n      if (ev.originator === 'local') {\n        var peerconnection = ev.session.connection;\n        peerconnection.addEventListener('addstream', function (e) {\n          document.getElementById(\"audio_remote\").srcObject = e.stream;\n        });\n        return;\n      }\n\n      if (!self.canCall) {\n        ev.session.terminate(self.options);\n        return;\n      }\n\n      if (!self.canRing) {\n        ev.session.terminate(self.options);\n        return;\n      } //   var s = ev.session;\n      //   self.session = s;       \n      //   redirectURL = '';\n      //   var remoteNumber = ev.request.from.display_name;\n      //   console.log(remoteNumber);\n      //   // $.get('https://crmroyalmotors.ru/index.php?r=auto/manager/get-info&p=' + remoteNumber, function (data) {\n      //   //     redirectURL = data.url;\n      //   //     $('#modal-answer .modal-body').html(data.html);\n      //   // }, 'json');\n      //   this.startRingTone();\n      //   // modalWindow.modal('show');\n      //   s.on('peerconnection', (p) => {\n      //       p.peerconnection.addEventListener('addstream', function (e) {\n      //           document.getElementById(\"audio_remote\").srcObject = e.stream\n      //       });\n      //   })\n      //   s.on('failed', (e) => {\n      //           this.stopRingTone();\n      //           // modalWindow.modal('hide');\n      //   });\n      //   s.on('accepted', (e) => {\n      //           this.stopRingTone();\n      //           // modalWindow.modal('hide');\n      //   }); \n      //   s.on('ended', (e) => {\n      //           this.endCall();\n      //   });        \n\n    });\n    this.ua.start();\n  },\n  watch: {\n    muted: function muted() {\n      if (this.muted) {\n        this.session.mute();\n      } else {\n        this.session.unmute();\n      }\n    }\n  },\n  methods: {\n    n: function n(_n) {\n      return _n > 9 ? \"\" + _n : \"0\" + _n;\n    },\n    endCall: function endCall() {\n      this.canCall = true;\n      clearInterval(this.sipCallTimer);\n      this.ua.terminateSessions();\n      this.session = null;\n      this.status = \"Готов\";\n    },\n    startTimer: function startTimer() {\n      var _this2 = this;\n\n      this.status = \"Разговор 00:00\";\n      var start = new Date().getTime();\n      clearInterval(this.sipCallTimer);\n      this.sipCallTimer = setInterval(function () {\n        var now = new Date().getTime();\n        var distance = now - start;\n        var minutes = Math.floor(distance % (1000 * 60 * 60) / (1000 * 60));\n        var seconds = Math.floor(distance % (1000 * 60) / 1000);\n        _this2.status = \"Разговор \" + _this2.n(minutes) + ':' + _this2.n(seconds);\n      }, 1000);\n    },\n    startRingTone: function startRingTone() {\n      try {\n        this.sipRingTone.play();\n      } catch (e) {}\n    },\n    stopRingTone: function stopRingTone() {\n      try {\n        this.sipRingTone.pause();\n      } catch (e) {}\n    },\n    startCall: function startCall() {\n      if (this.$root.phone_number > 0) {\n        var sip_num = 'sip:' + this.$root.phone_number + '@' + this.server;\n        this.session = this.ua.call(sip_num, this.options);\n        this.canCall = false;\n      }\n    }\n  }\n};",{"version":3,"sources":["caller.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div style=\"text-center\">\n    <div class=\"phone\">\n      <div class=\"phone-el\">{{status}}</div>\n      <div class=\"phone-el\"><input type=\"text\" v-model=\"$root.phone_number\" class=\"form-control form-phone\" style=\"width: 190px\"></div>\n      <div class=\"phone-el\">\n        <button class=\"btn btn-default call-btn call-btn-i\" @click=\"canRing = !canRing\" :title=\"canRing ? 'Выключить звонок' : 'Включить звонок'\"><i class=\"fa\" :class=\"canRing ? 'fa-bell' : 'fa-bell-slash'\"></i></button>\n        <button class=\"btn btn-default call-btn call-btn-i\" :disabled=\"!session\" @click=\"muted = !muted\" :title=\"muted ? 'Включить звук' : 'Выключить звук'\"><i class=\"fa\" :class=\"muted ? 'fa-microphone-slash' : 'fa-microphone'\"></i></button>\n        <button v-if=\"canCall\" class=\"btn btn-default call-btn call-btn-start\" @click=\"startCall()\" title=\"Позвонить\"><i class=\"fas fa-phone\"></i></button>\n        <button v-else class=\"btn btn-default call-btn call-btn-stop\" @click=\"endCall()\" title=\"Положить трубку\"><i class=\"fas fa-phone\"></i></button>\n\n      </div>\n    </div>\n    <audio id=\"audio_remote\" autoplay=\"autoplay\"></audio>\n    <audio id=\"sip-ringtone\" loop src=\"/sounds/ringtone.mp3\"></audio>\n  </div>\n</template>\n      \n<script> \n\n\nexport default {\n  props: {\n    server: String,\n    password: String,\n    user: String,\n    ws: String\n  },\n  data: function() {\n    return {\n      status: '',\n      muted: false,\n      ua: null,\n      uri: null,\n      canCall: true,\n      canRing: true,\n      session: null,\n      sipCallTimer: null,\n      sipRingTone: null,\n      options: null\n    }\n  },\n  created () {\n    this.$root.$on('global-call', () => {\n      this.startCall()\n    })\n    this.sipRingTone = document.getElementById('sip-ringtone');\n    this.uri = 'sip:'+this.user+'@'+this.server\n    var self = this\n    var socket = new JsSIP.WebSocketInterface(this.ws)\n    socket.via_transport = \"wss\";\n\n    var configuration = {\n        session_timers: false,\n        use_preloaded_route: false,\n        sockets  : [ socket ],\n        uri      : this.uri,\n        password : this.password,\n        realm    : this.server,\n      }\n\n    var eventHandlers = {\n        progress: (e) => { this.status = \"Соединяем\" },     \n        failed: (e) => { this.endCall() },\n        ended: (e) => { this.endCall() },      \n        confirmed: (e) => { this.startTimer() },\n        muted: (e) => { this.muted = true },\n        unmuted: (e) => { this.muted = false},                  \n      }\n      var pcConfig = {\n        rtcpMuxPolicy : 'negotiate',\n        iceServers: [\n            { urls : [\n              'stun:stun.l.google.com:19302',\n              'stun:stun1.l.google.com:19302',\n              'stun:stun2.l.google.com:19302',\n              'stun:stun3.l.google.com:19302',\n              'stun:stun4.l.google.com:19302',\n              ]\n            }\n        ]\n      }\n      this.options = {\n        eventHandlers: eventHandlers,\n        pcConfig : pcConfig,\n        mediaConstraints : { audio: true, video: false },\n        rtcOfferConstraints : { offerToReceiveAudio : 1 }\n      }\n    \n    this.ua = new JsSIP.UA(configuration);\n                \n    this.ua.on('connected', (e) => { this.status = \"Готов\" })\n    this.ua.on('disconnected', (e) => { this.status = \"Нет соединения\" })\n    this.ua.on('registered', (e) => { })\n    this.ua.on('unregistered', (e) => { this.status = \"Не зарегистрирован\" })\n    this.ua.on('registrationFailed', (e) => { this.status = \"Ошибка регистрации\" })\n    this.ua.on('newRTCSession', function (ev) {\n    \n    if (ev.originator === 'local') {\n        var peerconnection = ev.session.connection;\n        peerconnection.addEventListener('addstream', function (e) {\n                document.getElementById(\"audio_remote\").srcObject = e.stream\n        });\n\t    return;\n    }\n  \n    if (!self.canCall) { ev.session.terminate(self.options); return; }\n    if (!self.canRing) { ev.session.terminate(self.options); return; }  \n    //   var s = ev.session;\n    //   self.session = s;       \n    //   redirectURL = '';\n    //   var remoteNumber = ev.request.from.display_name;\n    //   console.log(remoteNumber);\n    //   // $.get('https://crmroyalmotors.ru/index.php?r=auto/manager/get-info&p=' + remoteNumber, function (data) {\n    //   //     redirectURL = data.url;\n    //   //     $('#modal-answer .modal-body').html(data.html);\n    //   // }, 'json');\n    //   this.startRingTone();\n    //   // modalWindow.modal('show');\n                    \n    //   s.on('peerconnection', (p) => {\n    //       p.peerconnection.addEventListener('addstream', function (e) {\n    //           document.getElementById(\"audio_remote\").srcObject = e.stream\n    //       });\n              \n    //   })\n    //   s.on('failed', (e) => {\n    //           this.stopRingTone();\n    //           // modalWindow.modal('hide');\n    //   });\n    //   s.on('accepted', (e) => {\n    //           this.stopRingTone();\n    //           // modalWindow.modal('hide');\n\n\n    //   }); \n    //   s.on('ended', (e) => {\n    //           this.endCall();\n    //   });        \n          \n    });\n    this.ua.start();\n  },\n  watch: {\n    muted: function() {\n      if (this.muted) {\n        this.session.mute()\n      } else {\n        this.session.unmute()\n      }\n    }\n  },\n  methods: {\n    n: function (n) {\n        return n > 9 ? \"\" + n : \"0\" + n;\n    },\n\n    endCall: function() {\n      this.canCall = true\n      clearInterval(this.sipCallTimer)\n      this.ua.terminateSessions()\n      this.session = null\n      this.status = \"Готов\"\n    },\n\n    startTimer: function() {\n      this.status = \"Разговор 00:00\"\n              \n      var start = new Date().getTime()\n      clearInterval(this.sipCallTimer)\n      this.sipCallTimer = setInterval(() => {\n          var now = new Date().getTime()\n          var distance = now - start\n          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60))\n          var seconds = Math.floor((distance % (1000 * 60)) / 1000)\n          this.status = \"Разговор \"+ this.n(minutes) + ':' + this.n(seconds)\n        }, 1000);\n    },\n\n    startRingTone: function() {\n      try { this.sipRingTone.play() } catch (e) { }\n    },\n\n    stopRingTone :function() {\n      try { this.sipRingTone.pause() } catch (e) { }\n    },\n\n    startCall: function() {\n      if (this.$root.phone_number > 0) {\n        var sip_num = 'sip:'+this.$root.phone_number+'@'+this.server\n        this.session = this.ua.call(sip_num, this.options)\n        this.canCall = false\n      }\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\" scope>\n.phone {\n  .form-phone {\n    font-size: 20px;\n    height: 30px;\n    border-radius: 2px;\n  }\n  .phone-el {\n    display: inline-block;\n    margin: 0 5px;\n  }\n  .btn {\n    display: inline-block;\n  }\n  .call-btn-start {\n    background: #02b302;\n  }\n  .call-btn-stop {\n    background: #dc3545;\n  }\n  .call-btn {\n    border-radius: 50%;\n    height: 32px;\n    width: 32px;\n    margin: 2px;\n    padding: 0;\n  }\n  .call-btn-i {\n    background: #aaa;\n  }\n}\n</style>\n"],"sourceRoot":"src/widgets/phone"}]}