{"remainingRequest":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js!/home/andrei/dev/vue/crmav100/node_modules/eslint-loader/index.js??ref--13-0!/home/andrei/dev/vue/crmav100/src/widgets/FormMixing.js","dependencies":[{"path":"/home/andrei/dev/vue/crmav100/src/widgets/FormMixing.js","mtime":1552813480102},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport router from '@/config/router';\nimport BaseText from '@/widgets/inputs/BaseText.vue';\nimport BaseSelect from '@/widgets/inputs/BaseSelect.vue';\nimport BaseSelectYesNo from '@/widgets/inputs/BaseSelectYesNo.vue';\nimport BaseSelectApi from '@/widgets/inputs/BaseSelectApi.vue';\nimport BaseTextarea from '@/widgets/inputs/BaseTextarea.vue';\nimport BaseDate from '@/widgets/inputs/BaseDate.vue';\nimport BaseTime from '@/widgets/inputs/BaseTime.vue';\nimport BasePanel from '@/widgets/panel/BasePanel.vue';\nimport mixingValidator from '@/libs/validators';\nexport default {\n  data: function data() {\n    return {\n      validators: null,\n      labels: null,\n      errors: null,\n      api: null,\n      loading: false,\n      hasChanges: false,\n      isLoad: false,\n      ctrlDown: false\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    if (this.$route.params.id) {\n      this.fetchData(this.$route.params.id);\n    } else {\n      this.isLoad = true;\n    }\n\n    this.$root.$el.onkeyup = function (e) {\n      if (e.keyCode == 17) _this.ctrlDown = false;\n    };\n\n    this.$root.$el.onkeydown = function (e) {\n      switch (e.keyCode) {\n        case 17:\n          _this.ctrlDown = true;\n          break;\n\n        case 27:\n          _this.exit();\n\n          break;\n\n        case 83:\n          if (_this.ctrlDown) {\n            _this.submitForm();\n\n            return false;\n          }\n\n          break;\n      }\n    };\n  },\n  watch: {\n    fields: {\n      handler: function handler(newValue, oldValue) {\n        if (this.isLoad) {\n          this.hasChanges = true;\n        }\n\n        this.isLoad = true;\n      },\n      deep: true\n    }\n  },\n  methods: {\n    fetchData: function fetchData(id) {\n      var _this2 = this;\n\n      this.loading = true;\n      axios.get(this.api, {\n        params: {\n          id: id\n        }\n      }).then(function (response) {\n        _this2.loading = false;\n        _this2.fields = response.data.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    exit: function exit() {\n      router.go(-1);\n    },\n    actions: function actions(event) {\n      switch (event) {\n        case 'submit':\n          this.submitForm();\n          break;\n\n        case 'exit':\n          this.exit();\n          break;\n\n        case 'submitAndExit':\n          if (this.submitForm()) {\n            this.exit();\n          }\n\n          break;\n      }\n    },\n    submitForm: function submitForm() {\n      if (this.validateAll(this.fields)) {\n        this.submit(this.fields, this.api);\n        return true;\n      }\n\n      return false;\n    },\n    submit: function submit(fields, api) {\n      var _this3 = this;\n\n      this.loading = true;\n      axios.post(api, fields).then(function (response) {\n        _this3.loading = false;\n        _this3.fields = response.data.data;\n        _this3.isLoad = false;\n        _this3.hasChanges = false;\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    validateAll: function validateAll(fields) {\n      var noerror = true;\n\n      for (var index in fields) {\n        if (this.validate(index, fields[index])) {\n          noerror = false;\n        }\n      }\n\n      return noerror;\n    },\n    validate: function validate(field, value) {\n      if (this.validators[field]) {\n        return this.errors[field] = this.validator(this.validators[field], value);\n      }\n    }\n  },\n  mixins: [mixingValidator],\n  components: {\n    'v-text': BaseText,\n    'v-textarea': BaseTextarea,\n    'v-select': BaseSelect,\n    'v-select-yes-no': BaseSelectYesNo,\n    'v-select-api': BaseSelectApi,\n    'v-date': BaseDate,\n    'v-time': BaseTime,\n    'v-panel': BasePanel\n  }\n};",{"version":3,"sources":["/home/andrei/dev/vue/crmav100/src/widgets/FormMixing.js"],"names":["axios","router","BaseText","BaseSelect","BaseSelectYesNo","BaseSelectApi","BaseTextarea","BaseDate","BaseTime","BasePanel","mixingValidator","data","validators","labels","errors","api","loading","hasChanges","isLoad","ctrlDown","created","$route","params","id","fetchData","$root","$el","onkeyup","e","keyCode","onkeydown","exit","submitForm","watch","fields","handler","newValue","oldValue","deep","methods","get","then","response","catch","error","console","log","go","actions","event","validateAll","submit","post","noerror","index","validate","field","value","validator","mixins","components"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AACA,OAAOC,eAAP,MAA4B,sCAA5B;AACA,OAAOC,aAAP,MAA0B,oCAA1B;AACA,OAAOC,YAAP,MAAyB,mCAAzB;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AAEA,eAAe;AACbC,EAAAA,IAAI,EAAE,gBAAW;AACf,WAAO;AACLC,MAAAA,UAAU,EAAE,IADP;AAELC,MAAAA,MAAM,EAAE,IAFH;AAGLC,MAAAA,MAAM,EAAE,IAHH;AAILC,MAAAA,GAAG,EAAE,IAJA;AAKLC,MAAAA,OAAO,EAAE,KALJ;AAMLC,MAAAA,UAAU,EAAE,KANP;AAOLC,MAAAA,MAAM,EAAE,KAPH;AAQLC,MAAAA,QAAQ,EAAE;AARL,KAAP;AAUD,GAZY;AAabC,EAAAA,OAba,qBAaF;AAAA;;AACT,QAAI,KAAKC,MAAL,CAAYC,MAAZ,CAAmBC,EAAvB,EAA2B;AACzB,WAAKC,SAAL,CAAe,KAAKH,MAAL,CAAYC,MAAZ,CAAmBC,EAAlC;AACD,KAFD,MAEO;AAAE,WAAKL,MAAL,GAAc,IAAd;AAAoB;;AAE7B,SAAKO,KAAL,CAAWC,GAAX,CAAeC,OAAf,GAAyB,UAACC,CAAD,EAAS;AAAE,UAAIA,CAAC,CAACC,OAAF,IAAa,EAAjB,EAAqB,KAAI,CAACV,QAAL,GAAgB,KAAhB;AAAuB,KAAhF;;AAEA,SAAKM,KAAL,CAAWC,GAAX,CAAeI,SAAf,GAA2B,UAACF,CAAD,EAAO;AAChC,cAAQA,CAAC,CAACC,OAAV;AACE,aAAK,EAAL;AACE,UAAA,KAAI,CAACV,QAAL,GAAgB,IAAhB;AACA;;AACF,aAAK,EAAL;AACE,UAAA,KAAI,CAACY,IAAL;;AACA;;AACF,aAAK,EAAL;AACE,cAAI,KAAI,CAACZ,QAAT,EAAmB;AACjB,YAAA,KAAI,CAACa,UAAL;;AACA,mBAAO,KAAP;AACD;;AACH;AAZF;AAcD,KAfD;AAiBD,GArCY;AAsCbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAE;AACNC,MAAAA,OADM,mBACEC,QADF,EACYC,QADZ,EACsB;AAC1B,YAAI,KAAKnB,MAAT,EAAiB;AACf,eAAKD,UAAL,GAAkB,IAAlB;AACD;;AACD,aAAKC,MAAL,GAAc,IAAd;AACF,OANM;AAOPoB,MAAAA,IAAI,EAAE;AAPC;AADH,GAtCM;AAiDbC,EAAAA,OAAO,EAAE;AACPf,IAAAA,SADO,qBACID,EADJ,EACQ;AAAA;;AACb,WAAKP,OAAL,GAAe,IAAf;AACAhB,MAAAA,KAAK,CACJwC,GADD,CACK,KAAKzB,GADV,EACe;AAACO,QAAAA,MAAM,EAAE;AAACC,UAAAA,EAAE,EAAEA;AAAL;AAAT,OADf,EAECkB,IAFD,CAEM,UAAAC,QAAQ,EAAI;AAChB,QAAA,MAAI,CAAC1B,OAAL,GAAe,KAAf;AACA,QAAA,MAAI,CAACkB,MAAL,GAAcQ,QAAQ,CAAC/B,IAAT,CAAcA,IAA5B;AACD,OALD,EAMCgC,KAND,CAMO,UAAAC,KAAK,EAAI;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAAoB,OANtC;AAOD,KAVM;AAWPb,IAAAA,IAAI,EAAE,gBAAW;AACf9B,MAAAA,MAAM,CAAC8C,EAAP,CAAU,CAAC,CAAX;AACD,KAbM;AAcPC,IAAAA,OAAO,EAAE,iBAAUC,KAAV,EAAiB;AACxB,cAAQA,KAAR;AACE,aAAK,QAAL;AACE,eAAKjB,UAAL;AACA;;AACF,aAAK,MAAL;AACE,eAAKD,IAAL;AACA;;AACF,aAAK,eAAL;AACE,cAAI,KAAKC,UAAL,EAAJ,EAAuB;AAAE,iBAAKD,IAAL;AAAa;;AACtC;AATJ;AAYD,KA3BM;AA4BPC,IAAAA,UAAU,EAAE,sBAAY;AACtB,UAAI,KAAKkB,WAAL,CAAiB,KAAKhB,MAAtB,CAAJ,EAAmC;AACjC,aAAKiB,MAAL,CAAY,KAAKjB,MAAjB,EAAyB,KAAKnB,GAA9B;AACA,eAAO,IAAP;AACD;;AACD,aAAO,KAAP;AACD,KAlCM;AAmCPoC,IAAAA,MAAM,EAAE,gBAASjB,MAAT,EAAiBnB,GAAjB,EAAsB;AAAA;;AAC5B,WAAKC,OAAL,GAAe,IAAf;AACAhB,MAAAA,KAAK,CACJoD,IADD,CACMrC,GADN,EACWmB,MADX,EAECO,IAFD,CAEM,UAAAC,QAAQ,EAAI;AAChB,QAAA,MAAI,CAAC1B,OAAL,GAAe,KAAf;AACA,QAAA,MAAI,CAACkB,MAAL,GAAcQ,QAAQ,CAAC/B,IAAT,CAAcA,IAA5B;AACA,QAAA,MAAI,CAACO,MAAL,GAAc,KAAd;AACA,QAAA,MAAI,CAACD,UAAL,GAAkB,KAAlB;AACD,OAPD,EAQC0B,KARD,CAQO,UAAAf,CAAC,EAAI;AAACiB,QAAAA,OAAO,CAACC,GAAR,CAAYlB,CAAZ;AAAe,OAR5B;AASD,KA9CM;AA+CPsB,IAAAA,WAAW,EAAE,qBAAShB,MAAT,EAAiB;AAC5B,UAAImB,OAAO,GAAG,IAAd;;AACA,WAAK,IAAIC,KAAT,IAAkBpB,MAAlB,EAA0B;AACxB,YAAI,KAAKqB,QAAL,CAAcD,KAAd,EAAqBpB,MAAM,CAACoB,KAAD,CAA3B,CAAJ,EAAyC;AACvCD,UAAAA,OAAO,GAAG,KAAV;AACD;AACF;;AACD,aAAOA,OAAP;AACD,KAvDM;AAwDPE,IAAAA,QAAQ,EAAE,kBAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AAChC,UAAI,KAAK7C,UAAL,CAAgB4C,KAAhB,CAAJ,EAA4B;AAC1B,eAAO,KAAK1C,MAAL,CAAY0C,KAAZ,IAAqB,KAAKE,SAAL,CAAe,KAAK9C,UAAL,CAAgB4C,KAAhB,CAAf,EAAuCC,KAAvC,CAA5B;AACD;AACF;AA5DM,GAjDI;AA+GbE,EAAAA,MAAM,EAAE,CAACjD,eAAD,CA/GK;AAgHbkD,EAAAA,UAAU,EAAE;AACV,cAAU1D,QADA;AAEV,kBAAcI,YAFJ;AAGV,gBAAYH,UAHF;AAIV,uBAAmBC,eAJT;AAKV,oBAAgBC,aALN;AAMV,cAAUE,QANA;AAOV,cAAUC,QAPA;AAQV,eAAWC;AARD;AAhHC,CAAf","sourcesContent":["import axios from 'axios'\nimport router from '@/config/router'\nimport BaseText from '@/widgets/inputs/BaseText.vue'\nimport BaseSelect from '@/widgets/inputs/BaseSelect.vue'\nimport BaseSelectYesNo from '@/widgets/inputs/BaseSelectYesNo.vue'\nimport BaseSelectApi from '@/widgets/inputs/BaseSelectApi.vue'\nimport BaseTextarea from '@/widgets/inputs/BaseTextarea.vue'\nimport BaseDate from '@/widgets/inputs/BaseDate.vue'\nimport BaseTime from '@/widgets/inputs/BaseTime.vue'\nimport BasePanel from '@/widgets/panel/BasePanel.vue'\nimport mixingValidator from '@/libs/validators'\n\nexport default {\n  data: function() {\n    return {\n      validators: null,\n      labels: null,\n      errors: null,\n      api: null,\n      loading: false,\n      hasChanges: false,\n      isLoad: false,\n      ctrlDown: false\n    }\n  },\n  created () {\n    if (this.$route.params.id) {\n      this.fetchData(this.$route.params.id)\n    } else { this.isLoad = true }\n\n    this.$root.$el.onkeyup = (e) =>   { if (e.keyCode == 17) this.ctrlDown = false }\n\n    this.$root.$el.onkeydown = (e) => {\n      switch (e.keyCode) {\n        case 17:\n          this.ctrlDown = true\n          break;\n        case 27:\n          this.exit()\n          break;\n        case 83:\n          if (this.ctrlDown) {\n            this.submitForm()\n            return false\n          }\n        break;\n      }\n    }\n\n  },\n  watch: {\n    fields: {\n      handler(newValue, oldValue) {\n        if (this.isLoad) {\n          this.hasChanges = true\n        }\n        this.isLoad = true\n     },\n     deep: true\n    }\n  },\n  methods: {\n    fetchData (id) {\n      this.loading = true\n      axios\n      .get(this.api, {params: {id: id} })\n      .then(response => {\n        this.loading = false\n        this.fields = response.data.data\n      })\n      .catch(error => { console.log(error) })\n    },\n    exit: function() {\n      router.go(-1)\n    },\n    actions: function (event) {\n      switch (event) {\n        case 'submit':\n          this.submitForm()\n          break;\n        case 'exit':\n          this.exit()\n          break;\n        case 'submitAndExit':\n          if (this.submitForm()) { this.exit() }\n          break;\n\n      }\n    },\n    submitForm: function () {\n      if (this.validateAll(this.fields)) {\n        this.submit(this.fields, this.api)\n        return true\n      }\n      return false\n    },\n    submit: function(fields, api) {\n      this.loading = true\n      axios\n      .post(api, fields)\n      .then(response => {\n        this.loading = false\n        this.fields = response.data.data\n        this.isLoad = false\n        this.hasChanges = false\n      })\n      .catch(e => {console.log(e)})\n    },\n    validateAll: function(fields) {\n      var noerror = true;\n      for (var index in fields) {\n        if (this.validate(index, fields[index])) {\n          noerror = false\n        }\n      }\n      return noerror\n    },\n    validate: function (field, value) {\n      if (this.validators[field]) {\n        return this.errors[field] = this.validator(this.validators[field], value)\n      }\n    }\n  },\n  mixins: [mixingValidator],\n  components: {\n    'v-text': BaseText,\n    'v-textarea': BaseTextarea,\n    'v-select': BaseSelect,\n    'v-select-yes-no': BaseSelectYesNo,\n    'v-select-api': BaseSelectApi,\n    'v-date': BaseDate,\n    'v-time': BaseTime,\n    'v-panel': BasePanel,\n  }\n}\n"]}]}