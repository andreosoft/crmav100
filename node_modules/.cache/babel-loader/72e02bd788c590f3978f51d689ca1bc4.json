{"remainingRequest":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js!/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/andrei/dev/vue/crmav100/src/widgets/inputs/BaseImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/andrei/dev/vue/crmav100/src/widgets/inputs/BaseImage.vue","mtime":1553682495686},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _parseInt from \"/home/andrei/dev/vue/crmav100/node_modules/@babel/runtime-corejs2/core-js/parse-int\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  props: {\n    value: String,\n    label: {\n      type: String,\n      default: ''\n    },\n    error: {\n      type: String,\n      default: ''\n    },\n    api: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      id: null,\n      image: null,\n      status: 0\n    };\n  },\n  mounted: function mounted() {\n    this.id = this._uid;\n  },\n  methods: {\n    upload: function upload() {\n      var _this = this;\n\n      this.image = this.$refs.file.files[0];\n      this.status = 0;\n      var formData = new FormData();\n      formData.append('file', this.image);\n      formData.append('name', this.image.name);\n      axios.post(this.api, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        onUploadProgress: function onUploadProgress(progressEvent) {\n          _this.status = _parseInt(progressEvent.loaded / progressEvent.total * 100);\n        }\n      }).then(function (response) {\n        _this.$emit('input', response.data.data);\n      }).catch(function () {\n        console.log('FAILURE!!');\n      });\n    }\n  }\n};",{"version":3,"sources":["BaseImage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA,MADA;AAEA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAFA;AAMA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KANA;AAUA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAVA,GADA;AAgBA,EAAA,IAhBA,kBAgBA;AACA,WAAA;AACA,MAAA,EAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,IAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA,GAtBA;AAuBA,EAAA,OAvBA,qBAuBA;AACA,SAAA,EAAA,GAAA,KAAA,IAAA;AACA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,EAAA,kBAAA;AAAA;;AACA,WAAA,KAAA,GAAA,KAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,WAAA,MAAA,GAAA,CAAA;AAEA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,KAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,KAAA,CAAA,IAAA;AACA,MAAA,KAAA,CAAA,IAAA,CACA,KAAA,GADA,EAEA,QAFA,EAEA;AACA,QAAA,OAAA,EAAA;AAAA,0BAAA;AAAA,SADA;AAEA,QAAA,gBAAA,EAAA,0BAAA,aAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,GAAA,UAAA,aAAA,CAAA,MAAA,GAAA,aAAA,CAAA,KAAA,GAAA,GAAA,CAAA;AACA;AAJA,OAFA,EAQA,IARA,CAQA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,OAAA,EAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,OAVA,EAWA,KAXA,CAWA,YAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AACA,OAbA;AAcA;AAtBA;AA1BA,CAAA","sourcesContent":["<template>\n  <div class=\"form-group row\">\n    <label class=\"col-form-label col-sm-2 text-right\">{{label}}</label>\n    <div class=\"col-sm-10\">\n      <div v-if=\"value\"> \n        <a :href=\"'http://lk.staropetrovskoe.ru'+value\" target=\"_blank\"><img :src=\"'http://lk.staropetrovskoe.ru'+value\" style=\"height: 100px\"></a>\n        <button @click=\"$emit('input', ''); image = null\" class=\"btn btn-secondary\" style=\"margin: 5px;\">Удалить</button>  \n      </div>\n      <div v-else>\n        <input v-on:change=\"upload()\" ref=\"file\" type=\"file\" style=\"display: none\" :id=\"id+'-in'\">\n        <label class=\"btn btn-secondary\" :for=\"id+'-in'\" >Загрузить</label>\n        <div>\n          <transition name=\"fade\" v-if=\"image\">\n            <div class=\"file-image-el row\" style=\"align-items: center;\">\n              <div class=\"col-6\">{{image.name}}</div>\n              <div class=\"col-6\">\n                <div class=\"progress\">\n                  <div class=\"progress-bar\" :style=\"{width: status + '%'}\">{{status}}%</div>\n                </div>\n              </div>\n            </div>\n          </transition>\n        </div>\n      </div>\n      <template v-if=\"error != null\">\n        <div class=\"invalid-feedback\">{{error}}</div>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  props: {\n    value: String,\n    label: {\n      type: String,\n      default: ''\n    },\n    error: {\n      type: String,\n      default: ''\n    },\n    api: {\n      type: String,\n      default: ''\n    },\n  },\n  data () {\n    return {\n      id: null,\n      image: null,\n      status: 0\n    }\n  }, \n  mounted () {\n    this.id = this._uid\n  },\n  methods: {\n    upload: function() {\n      this.image = this.$refs.file.files[0]\n      this.status = 0\n  \n      let formData = new FormData()\n      formData.append('file', this.image)\n      formData.append('name', this.image.name)\n      axios.post(\n        this.api,\n        formData, {\n          headers: {  'Content-Type': 'multipart/form-data' },\n          onUploadProgress: progressEvent => {\n            this.status = parseInt(progressEvent.loaded / progressEvent.total * 100)\n          }\n        }\n      ).then(response => {\n        this.$emit('input', response.data.data)\n      })\n      .catch(function(){\n        console.log('FAILURE!!');\n      })\n    }\n  },\n}\n</script>\n"],"sourceRoot":"src/widgets/inputs"}]}