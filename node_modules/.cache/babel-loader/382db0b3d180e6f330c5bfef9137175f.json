{"remainingRequest":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js!/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/andrei/dev/vue/crmav100/src/views/request/request-from.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/andrei/dev/vue/crmav100/src/views/request/request-from.vue","mtime":1558348658845},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { SlideXRightTransition } from \"vue2-transitions\";\nimport api from \"@/config/api\";\nimport axios from \"axios\";\nimport router from \"@/config/router\";\nimport DatePick from \"vue-date-pick\";\nimport \"vue-date-pick/dist/vueDatePick.css\";\nimport { VueMaskDirective } from \"@/libs/v-mask\";\nimport Vue from \"vue\";\nVue.directive(\"mask\", VueMaskDirective);\nexport default {\n  components: {\n    SlideXRightTransition: SlideXRightTransition,\n    DatePick: DatePick\n  },\n  props: {\n    offer_id: String,\n    type: Object,\n    show: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      loading: false,\n      fields: {\n        info: null,\n        eventon: {\n          date: \"\",\n          time: \"\"\n        }\n      }\n    };\n  },\n  methods: {\n    submit: function submit() {\n      var _this = this;\n\n      this.loading = true;\n      axios({\n        method: 'post',\n        url: api.request,\n        data: this.fields,\n        params: {\n          id: this.offer_id,\n          type: this.type.value\n        }\n      }).then(function (response) {\n        _this.loading = false;\n\n        _this.$emit(\"close-menu\");\n\n        _this.$root.$emit('show-info', {\n          text: 'Создано событие: ' + _this.type.text\n        });\n\n        router.go(-1); //   router.push({ name: \"index\" });\n      }).catch(function (e) {\n        console.log(e);\n      });\n    }\n  }\n};",{"version":3,"sources":["request-from.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA,SAAA,qBAAA,QAAA,kBAAA;AACA,OAAA,GAAA,MAAA,cAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,MAAA,MAAA,iBAAA;AACA,OAAA,QAAA,MAAA,eAAA;AACA,OAAA,oCAAA;AACA,SAAA,gBAAA,QAAA,eAAA;AACA,OAAA,GAAA,MAAA,KAAA;AAEA,GAAA,CAAA,SAAA,CAAA,MAAA,EAAA,gBAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,qBAAA,EAAA,qBADA;AAEA,IAAA,QAAA,EAAA;AAFA,GADA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA,MADA;AAEA,IAAA,IAAA,EAAA,MAFA;AAGA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAHA,GALA;AAaA,EAAA,IAbA,kBAaA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,MAAA,EAAA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,OAAA,EAAA;AACA,UAAA,IAAA,EAAA,EADA;AAEA,UAAA,IAAA,EAAA;AAFA;AAFA;AAFA,KAAA;AAUA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,EAAA,kBAAA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,KAAA,CAAA;AAAA,QAAA,MAAA,EAAA,MAAA;AAAA,QAAA,GAAA,EAAA,GAAA,CAAA,OAAA;AAAA,QAAA,IAAA,EAAA,KAAA,MAAA;AAAA,QAAA,MAAA,EAAA;AAAA,UAAA,EAAA,EAAA,KAAA,QAAA;AAAA,UAAA,IAAA,EAAA,KAAA,IAAA,CAAA;AAAA;AAAA,OAAA,CAAA,CACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,YAAA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,WAAA,EAAA;AAAA,UAAA,IAAA,EAAA,sBAAA,KAAA,CAAA,IAAA,CAAA;AAAA,SAAA;;AACA,QAAA,MAAA,CAAA,EAAA,CAAA,CAAA,CAAA,EAJA,CAKA;AACA,OAPA,EAQA,KARA,CAQA,UAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,OAVA;AAWA;AAdA;AAzBA,CAAA","sourcesContent":["<template>\n  <slide-x-right-transition :duration=\"700\">\n    <div v-show=\"show\" class=\"r-modal-wrapper\">\n      <div class=\"r-modal\">\n        <div class=\"r-header\">\n          <div class=\"r-header-title\">Создать событие {{type.text}}</div>\n          <div class=\"r-header-close\">\n            <button @click=\"$emit('close-menu')\" title=\"Закрыть окно\">\n              <i class=\"fas fa-times\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"r-body\">\n          <div v-if=\"loading\" class=\"loading-block\">\n            <div class=\"loader\"></div>\n          </div>\n          <div v-if=\"type.value == 100\">\n            <div class=\"form-group\">\n              <label>Выберите дату события</label>\n              <date-pick\n                class=\"form-control\"\n                v-model=\"fields.eventon.date\"\n              ></date-pick>\n            </div>\n            <div class=\"form-group\">\n              <label>Выберите время события</label>\n              <input\n                class=\"form-control\"\n                v-model=\"fields.eventon.time\"\n                v-mask=\"'##:##'\"\n                @input=\"evt=>fields.eventon.time=evt.target.value\"\n                type=\"text\"\n              >\n            </div>\n          </div>\n          <div>\n            <div class=\"form-group\">\n              <label>Введите комментраий</label>\n              <textarea v-model=\"fields.info\" class=\"form-control\"></textarea>\n            </div>\n          </div>\n          <hr>\n          <div style=\"text-align: right;\">\n            <button\n              class=\"btn btn-secondary\"\n              style=\"margin-right: 4px;\"\n              @click=\"$emit('close-menu')\"\n            >Отмена</button>\n            <button class=\"btn btn-primary\" style=\"margin-right: 4px;\" @click=\"submit()\">Создать</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </slide-x-right-transition>\n</template>\n\n<script>\nimport { SlideXRightTransition } from \"vue2-transitions\";\nimport api from \"@/config/api\";\nimport axios from \"axios\";\nimport router from \"@/config/router\";\nimport DatePick from \"vue-date-pick\";\nimport \"vue-date-pick/dist/vueDatePick.css\";\nimport { VueMaskDirective } from \"@/libs/v-mask\";\nimport Vue from \"vue\";\n\nVue.directive(\"mask\", VueMaskDirective);\n\nexport default {\n  components: {\n    SlideXRightTransition,\n    DatePick\n  },\n  props: {\n    offer_id: String,\n    type: Object,\n    show: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      fields: {\n        info: null,\n        eventon: {\n          date: \"\",\n          time: \"\"\n        }\n      }\n    };\n  },\n  methods: {\n    submit: function() {\n      this.loading = true;\n      axios({ method: 'post', url: api.request, data: this.fields, params: {id: this.offer_id, type: this.type.value}})\n        .then(response => {\n          this.loading = false;\n          this.$emit(\"close-menu\");\n          this.$root.$emit('show-info', {text: 'Создано событие: '+ this.type.text})\n          router.go(-1)\n        //   router.push({ name: \"index\" });\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.vdpComponent.vdpWithInput > input {\n  font-size: 13px;\n  padding: 7px;\n  width: 100%;\n}\n.vdpComponent {\n  padding: 0;\n  height: auto;\n}\n</style>\n"],"sourceRoot":"src/views/request"}]}