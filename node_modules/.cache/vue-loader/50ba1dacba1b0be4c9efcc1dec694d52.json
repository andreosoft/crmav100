{"remainingRequest":"/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/andrei/dev/vue/crmav100/src/views/offers/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/andrei/dev/vue/crmav100/src/views/offers/index.vue","mtime":1559035230890},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from \"axios\";\nimport router from \"@/config/router\";\nimport api from \"@/config/api\";\n\nexport default {\n  data: function() {\n    return {\n      loading: false,\n      data: []\n    };\n  },\n  created() {\n    this.fetchData();\n    let self = this;\n    var timerId = setInterval(() => {\n      self.fetchData();\n    }, 10000);\n  },\n  methods: {\n    createRequest: function(id) {\n      router.push({ name: 'request_form', params: {id: id}})\n    },\n    fetchData: function() {\n      // this.loading = true;\n      let params = {};\n      axios\n        .get(api.offers_all, { params: params })\n        .then(response => {\n          // this.loading = false;\n          if (response.data.status == \"ok\") {\n            this.data = response.data.data;\n          }\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    }\n  }\n};\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/offers","sourcesContent":["<template>\n  <div>\n    <div v-if=\"loading\" class=\"loading-block\">\n      <div class=\"loader\"></div>\n    </div>\n    <div v-if=\"data\">\n      <div class=\"tbl fixed\" style=\" min-width: 500px;\">\n        <div class=\"row tbl-row tbl-header\">\n          <div class=\"tbl-col col-3\">Марка</div>\n          <div class=\"tbl-col col-3\">Модель</div>\n          <div class=\"tbl-col col-2\">Год</div>\n          <div class=\"tbl-col col-2\">Цена</div>\n          <div class=\"tbl-col col-1\"></div>\n        </div>\n        <div class=\"tbl-body\">\n          <div v-for=\"(item, key) in data\" :key=\"key\" class=\"row tbl-row\">\n            <div class=\"tbl-col col-3\">{{item.marka}}</div>\n            <div class=\"tbl-col col-3\">{{item.model}}</div>\n            <div class=\"tbl-col col-2\">{{item.year}}</div>\n            <div class=\"tbl-col col-2\">{{item.price}}</div>\n            <div class=\"tbl-col col-1\">\n              <button\n                @click=\"createRequest(item.id)\"\n                title=\"Создать заявку на машину\"\n                class=\"btn btn-primary btn-round\"\n              >\n                <i class=\"fas fa-plus\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n    \n<script>\nimport axios from \"axios\";\nimport router from \"@/config/router\";\nimport api from \"@/config/api\";\n\nexport default {\n  data: function() {\n    return {\n      loading: false,\n      data: []\n    };\n  },\n  created() {\n    this.fetchData();\n    let self = this;\n    var timerId = setInterval(() => {\n      self.fetchData();\n    }, 10000);\n  },\n  methods: {\n    createRequest: function(id) {\n      router.push({ name: 'request_form', params: {id: id}})\n    },\n    fetchData: function() {\n      // this.loading = true;\n      let params = {};\n      axios\n        .get(api.offers_all, { params: params })\n        .then(response => {\n          // this.loading = false;\n          if (response.data.status == \"ok\") {\n            this.data = response.data.data;\n          }\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    }\n  }\n};\n</script>"]}]}