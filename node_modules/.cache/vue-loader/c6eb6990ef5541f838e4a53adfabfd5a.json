{"remainingRequest":"/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/andrei/dev/vue/crmav100/src/views/request/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/andrei/dev/vue/crmav100/src/views/request/index.vue","mtime":1558379400708},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrei/dev/vue/crmav100/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from \"axios\";\nimport router from \"@/config/router\";\nimport offer from \"@/models/offer\";\nimport api from \"@/config/api\";\n\nexport default {\n  data: function() {\n    return {\n      loading: false,\n      data: [],\n      offer: offer,\n      id: 0,\n      label: \"\"\n    };\n  },\n  created() {\n    this.updateRoute();\n  },\n  watch: {\n    $route: \"updateRoute\"\n  },\n  methods: {\n    updateRoute: function() {\n      if (this.$route.params.id) {\n        this.id = this.$route.params.id;\n        this.fetchData(this.id);\n      }\n    },\n    openRequest: function(id) {\n      router.push({ name: \"request_form\", params: { id: id } });\n    },\n    fetchData: function(id) {\n      this.loading = true;\n      axios\n        .get(api.request, { params: { id: id } })\n        .then(response => {\n          this.loading = false;\n          if (response.data.status == \"ok\") {\n            this.data = response.data.data;\n          }\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    }\n  }\n};\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/request","sourcesContent":["<template>\n  <div>\n    <div v-if=\"loading\" class=\"loading-block\">\n      <div class=\"loader\"></div>\n    </div>\n    <div>Заявки со статусом: {{offer.states.find(x => x.value == id) ? offer.states.find(x => x.value == id).text : ''}}</div>\n    <div v-if=\"data\">\n      <div class=\"tbl fixed\" style=\"top: 60px; min-width: 500px;\">\n        <div class=\"row tbl-row tbl-header\">\n          <div class=\"tbl-col col-3\">Дата</div>\n          <div class=\"tbl-col col-3\">Пользователь</div>\n          <div class=\"tbl-col col-3\">Марка</div>\n          <div class=\"tbl-col col-3\">Модель</div>\n          <div class=\"tbl-col col-2\">Год</div>\n          <div class=\"tbl-col col-2\">Цена</div>\n          <div class=\"tbl-col col-1\"></div>\n        </div>\n        <div class=\"tbl-body\">\n          <div v-for=\"(item, key) in data\" :key=\"key\" class=\"row tbl-row\">\n            <div class=\"tbl-col col-3\">{{item.eventon}}</div>\n            <div class=\"tbl-col col-3\">{{item.user}}</div>\n            <div class=\"tbl-col col-3\">{{item.marka}}</div>\n            <div class=\"tbl-col col-3\">{{item.model}}</div>\n            <div class=\"tbl-col col-2\">{{item.year}}</div>\n            <div class=\"tbl-col col-2\">{{item.price}}</div>\n            <div class=\"tbl-col col-1\">\n              <button\n                @click=\"openRequest(item.offer_id)\"\n                title=\"Открыть заявку на машину\"\n                class=\"btn btn-primary\"\n              >Открыть</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport router from \"@/config/router\";\nimport offer from \"@/models/offer\";\nimport api from \"@/config/api\";\n\nexport default {\n  data: function() {\n    return {\n      loading: false,\n      data: [],\n      offer: offer,\n      id: 0,\n      label: \"\"\n    };\n  },\n  created() {\n    this.updateRoute();\n  },\n  watch: {\n    $route: \"updateRoute\"\n  },\n  methods: {\n    updateRoute: function() {\n      if (this.$route.params.id) {\n        this.id = this.$route.params.id;\n        this.fetchData(this.id);\n      }\n    },\n    openRequest: function(id) {\n      router.push({ name: \"request_form\", params: { id: id } });\n    },\n    fetchData: function(id) {\n      this.loading = true;\n      axios\n        .get(api.request, { params: { id: id } })\n        .then(response => {\n          this.loading = false;\n          if (response.data.status == \"ok\") {\n            this.data = response.data.data;\n          }\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    }\n  }\n};\n</script>"]}]}